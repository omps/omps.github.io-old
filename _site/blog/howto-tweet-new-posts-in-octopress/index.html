<!DOCTYPE html><html lang="en" itemscope itemtype="http://schema.org/WebPage"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Tweet Posts with Octopress | omps.in</title><meta name=description content="Thanks to the blog post by Tony Guntharp who got inspired from another blog post by Adnan Abdulhussein on how to integrate twitter posting with Octopress. Hi..."><meta name=viewport content="width=device-width, initial-scale=1"><meta http-equiv="cache-control" content="public"/><meta http-equiv="pragma" content="public"><meta name="keywords" content="omps.in, blog, Theme, Jekyll" /><meta name="author" content="omps" /><meta property="og:locale" content="en" /><meta property="og:site_name" content="omps.in" /><meta property="og:type" content="Website" /><meta property="og:url" content="http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/" /><meta property="og:description" content="Welcome to omps.in" /><meta property="og:title" content="Tweet Posts with Octopress - omps.in" /><link rel="canonical" href="http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/"><link rel="alternate" type="application/rss+xml" title="omps.in" href="http://localhost:4000/feed.xml"> <script type="application/ld+json"> {"@context": "http://schema.org", "@type": "Website", "name": "omps", "headline": "omps.in", "author": {"@type": "Person", "name": {"omps.in"}}, "description": "Welcome to omps.in", "url": "http://localhost:4000"} </script> <script type="text/javascript"> var GLOBAL_BASEURL = "http://localhost:4000"; </script><link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/images/favicon/favicon-32x32.png"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"><link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,600i,700,700i,800,800i" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet"><link rel="stylesheet" href="http://localhost:4000/assets/stylesheets/main.css"> <script> var url_site = "http://localhost:4000", url_production = "http://localhost:4000"; if (url_site != url_production) { (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-90440415-1', 'auto'); ga('set', 'forceSSL', true); ga('send', 'pageview'); }; </script></head><body><div class="main" id="top"><div class="container wrapper"><div class="row"><div class="col-sm-3 sidebar"><div class="row header"><h2><a href="http://localhost:4000"><br>omps.in! </a></h2></div><div class="row menu"><ul><li class="nav-item"> <i class="fa fa-home" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/">Home</a></li><hr class="breakline"><li class="nav-item"> <i class="fa fa-edit" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/" >Blog</a></li><li class="nav-item"> <i class="fa fa-search" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/search/" >Search</a></li><li class="nav-item"> <i class="fa fa-tags" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/tags/" >Tags</a></li><li class="nav-item"> <i class="fa fa-briefcase" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/projects/" onclick="ga('send', 'event', 'linkTo', 'http://localhost:4000/projects/', 'Projects');" >Projects</a></li><li class="nav-item"> <i class="fa fa-file-text-o" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/resume/" onclick="ga('send', 'event', 'linkTo', 'http://localhost:4000/resume/', 'Resume');" >Resume</a></li><li class="nav-item"> <i class="fa fa-rss" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/feed.xml" >Feed</a></li><li class="nav-item"> <i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/contact/" >Contact</a></li></ul><div class="socials"><div class="row"><p></p><p>Follow Me!</p><div id="github" class="col-sm-3 columns"> <a href="https://github.com/omps/" target="_blank" title="GitHub" onclick="ga('send', 'event', 'linkTo', 'GitHub', 'Social Network', {useBeacon: true});" > <i class="fa fa-github icon" aria-hidden="true"></i> </a></div><div id="twitter" class="col-sm-3 columns"> <a href="https://twitter.com/ohgnis" target="_blank" title="Twitter" onclick="ga('send', 'event', 'linkTo', 'Twitter', 'Social Network', {useBeacon: true});" > <i class="fa fa-twitter icon" aria-hidden="true"></i> </a></div><div id="gplus" class="col-sm-3 columns"> <a href="https://plus.google.com/u/1/+OmPrakashomps" target="_blank" title="Google Plus" onclick="ga('send', 'event', 'linkTo', 'Google Plus', 'Social Network', {useBeacon: true});" > <i class="fa fa-google-plus icon" aria-hidden="true"></i> </a></div><div id="linkedin" class="col-sm-3 columns"> <a href="https://www.linkedin.com/in/ompsingh/" target="_blank" title="LinkedIn" onclick="ga('send', 'event', 'linkTo', 'LinkedIn', 'Social Network', {useBeacon: true});" > <i class="fa fa-linkedin icon" aria-hidden="true"></i> </a></div></div></div></div></div><div class="col-sm-9 content-main"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><div class="row title"><h1>Tweet Posts with Octopress</h1></div><div class="row meta" datetime="2016-04-24"> <time class="col-sm-6 datetime"> <i class="fa fa-calendar" aria-hidden="true"></i><span class="text tmargin "> 24 Abril, 2016 </span> </time><div class="col-sm-6 count-comments"> <span class="wrap"><i class="fa fa-comments" aria-hidden="true"></i>&nbsp;<a href="#comments" data-disqus-identifier="/blog/howto-tweet-new-posts-in-octopress/">0</a></span></div></div><div class="row tag-list"> <i class="fa fa-tags" aria-hidden="true"></i></div><div class="row"> Read this in "about 4 minutes".</div><div class="row content"><p>Thanks to the <a href="http://fusion94.org/blog/2013/01/13/howto-tweet-new-posts-in-octopress/">blog post</a> by <a href="http://fusion94.org">Tony Guntharp</a> who got inspired from another blog post by <a href="http://blog.prydoni.us">Adnan Abdulhussein</a> on how to integrate twitter posting with <a href="http://octopress.org">Octopress</a>. His post was some 3 Years old and the <a href="https://github.com/sferik/twitter">twitter gem</a> for <a href="http://octopress.org">Octopress</a> version <code>5.16.0</code> has gone through a lot of changes, So technically I did some rewrite into the ruby configuration code and fixed it so I can post the tweets with the latest twitter gem. The basic idea remains the same taken from the predecessors blogs, you create a post and print the tweet message you want to give and it create a link to the post in the tweet_queue file. When the <code>rake deploy</code> task is called, it reads from the <strong>tweet_queue</strong> file and tweets what’s in their line by line. This way you can create multiple posts at a time, and they all will be tweeted when you run your <code>rake deploy</code> task for your blog.</p><h3 id="create-a-twitter-application">Create a twitter application.</h3><p>A twitter application is must to post to <a href="http://www.twitter.com">twitter</a>. Head over to https://apps.twitter.com/app/new, sign in and create a new application for your blog.</p><p>In <em>settings</em>: ensure <em>read</em> and <em>write</em> is <strong>enabled</strong>.</p><p>In <em>Keys and access tokens</em>: take note of the following details.</p><ul><li>Consumer Keys</li><li>Consumer Secret</li><li>Access Token</li><li>Access Token Secret</li></ul><h3 id="install-the-gem">Install the gem</h3><p>We’ll be using the <a href="https://github.com/sferik/twitter">twitter gem</a> to update the status. Put the below line in your development <code>Gemfile</code></p><pre><code>gem twitter
</code></pre><p>from the terminal run <code>bundle install</code></p><h3 id="configure-octopress-to-use-twitter-gem">Configure Octopress to use twitter gem</h3><p>Open the <code>Rakefile</code> in your favorite editor and add the below near the top with other required in the <code>Rakefile</code>.</p><pre><code>require twitter
</code></pre><p>Add the following lines after the <code>server_port</code> line</p><p>```ruby Twitter Configuration # Twitter config (for tweeting posts) client = Twitter::REST::Client.new do |config| config.consumer_key = “YOUR_CONSUMER_KEY” config.consumer_secret = “YOUR_CONSUMER_SECRET” config.access_token = “YOUR_ACCESS_TOKEN”” config.access_token_secret = “YOUR_ACCESS_TOKEN_SECRET end</p><pre><code># MAKE SURE THERE IS A TRAILING SLASH, otherwise the linking won't work
blog_url = "YOUR_BLOG_URL/" ```
</code></pre><p>ensure the trailing slash(/), It is required to append the date-name combination of the posts to form the url of the post.</p><h3 id="modify-the-new_post-rake-task">Modify the new_post rake task</h3><p>Search for <code>:new_post</code> rake task in the <code>Rakefile</code> and replace the task with the following.</p><p>```ruby Modifying new_post task</p><h1 id="usage-rake-new_postmy-new-post-or-rake-new_postmy-new-post-or-rake-new_post-defaults-to-new-post">usage rake new_post[my-new-post] or rake new_post[‘my new post’] or rake new_post (defaults to “new-post”)</h1><p>desc “Begin a new post in #{source_dir}/#{posts_dir}” task :new_post, :title, :tweet do |t, args| raise “### You haven’t set anything up yet. First run <code>rake install</code> to set up an Octopress theme.” unless File.directory?(source_dir) mkdir_p “#{source_dir}/#{posts_dir}” args.with_defaults(:title =&gt; ‘new-post’, :tweet =&gt; ‘’) title = args.title filename = “#{source_dir}/#{posts_dir}/#{Time.now.strftime(‘%Y-%m-%d’)}-#{title.to_url}.#{new_post_ext}” if File.exist?(filename) abort(“rake aborted!”) if ask(“#{filename} already exists. Do you want to overwrite?”, [‘y’, ‘n’]) == ‘n’ end puts “Creating new post: #{filename}” open(filename, ‘w’) do |post| post.puts “—” post.puts “layout: post” post.puts “title: "#{title.gsub(/&amp;/,’&amp;’)}"” post.puts “date: #{Time.now.strftime(‘%Y-%m-%d %H:%M’)}” post.puts “comments: true” post.puts “categories: “ post.puts “—” end tweet = args.tweet if not tweet == ‘’ # add to twitter status queue puts ‘Adding post to tweet queue, it will be tweeted after deploying.’ open(‘tweet_queue’, ‘a’) do |file| file.puts “#{tweet} - #{blog_url}#{Time.now.strftime(‘%Y/%m/%d’)}/#{title.to_url}/” end end end</p><pre><code>
If you already have a modified task, the only changes are the task declaration ```(task :new_post, :title, :tweet do |t, args|)``` and the last few lines starting with ```tweet = args.tweet```.

### Setup to post tweets on deploy

Look for the `deplpoy_task` in the `Rakefile` and change or replace the files accordingly.

```ruby Deploy task
desc "Default deploy task"
task :deploy do
  # Check if preview posts exist, which should not be published
  if File.exists?(".preview-mode")
    puts "## Found posts in preview mode, regenerating files ..."
    File.delete(".preview-mode")
    Rake::Task[:generate].execute
  end

  Rake::Task[:copydot].invoke(source_dir, public_dir)
  Rake::Task["#{deploy_default}"].execute

  # Tweet
  next if not File.exists? 'tweet_queue'
  puts "Tweeting..."
  open('tweet_queue', 'r') do |file|
    while (line = file.gets)
      puts "Tweeting '#{line.gsub("\n", "")}' for @#{client.current_user.screen_name}..."
      client.update(line)
    end
  end
  puts "Deleting queue..."
  rm 'tweet_queue'
end
</code></pre><p>or just add the <code>#Tweet</code> task in deploy task.</p><h3 id="usage">Usage</h3><p>Now while creating your <code>new_post</code> you need to specify a separate message for the tweet when you create a post. This is the best way to give you the option of choosing whether you want to tweet the post or not. It also allows you to add @’s and #’s to the tweet message separately from the post title.</p><p>For Example:</p><p>The first part is the URL, and the second part is your tweet message.</p><pre><code>rake new_post["HowTo Tweet New Posts in Octopress","HowTo Tweet New Posts in Octopress @twitter"]
</code></pre><p>You should be able to see your new post generated by the rake task.</p><p>Once, this is done. Go Ahead and write into your post and <code>rake gen_deploy</code> should do the rest of it.</p><div class="row sharebutton"><ul class="wrapper"><li class="title">Share</li><li class="fb"> <a href="#" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),'facebook-share-dialog','width=626,height=436');return false;">Facebook</a></li><li class="linkedin"> <a href="http://www.linkedin.com/cws/share?url=http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/" onclick="window.open(this.href,&quot;popupwindow&quot;,&quot;status=0,height=500,width=700,resizable=0,top=50,left=100&quot;);return false;" target="_blank" title="Share on LinkedIn">Linkedin</a></li><li class="googleplus"> <a href="https://plus.google.com/share?url=http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/" onclick="window.open(this.href,&quot;popupwindow&quot;,&quot;status=0,height=500,width=700,resizable=0,top=50,left=100&quot;);return false;" target="_blank" title="Share on Google Plus">Google+</a></li></ul></div><div class="day-quote"><div class="title"></div><div class="content"></div></div><div class="row author"><div class="col-sm-2 image"> <img class="img-responsive center-block" src="http://localhost:4000/assets/images/author/typing.svg" alt=""></div><div class="col-sm-10 bio"><p class="title">Author</p><p class="name">omps</p><p class="content">Learning to blog, swim, cycle and run.</p></div></div><div class="disqus" id="comments"><div class="title"><h3><i class="fa fa-comments" aria-hidden="true"></i>&nbsp;Leave a comment on this post</h3></div><div class="content"><div id="disqus_thread"></div><script type="text/javascript"> var disqus_shortname = 'omps-in'; var disqus_identifier = '/blog/howto-tweet-new-posts-in-octopress/'; var disqus_title = 'Tweet Posts with Octopress'; var disqus_url = 'http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script></div></div></div></article></div></div></div><div class="footer"><div class="container-fluid"><div class="row-fluid"><div class="col-sm-4 copyright"> <span>omps.in © 2017-2018 • All right reserved.</span></div><div class="col-sm-4 message"> <span>theme based on Jekyll.</span></div><div class="col-sm-4 madeby"> <span>Made with&nbsp;<a href="https://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;using&nbsp;<a href="https://github.com/williamcanin/typing-jekyll-template" target="_blank">Typing</a>&nbsp;Theme.</span></div><a class="pull-right top" href="#top"><i class="fa fa-caret-up" aria-hidden="true"></i></a></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script src="http://localhost:4000/assets/javascripts/jekyll-spotify-plugin.min.js"></script> <script type="text/javascript"> jQuery(document).ready(function($) { $('.post > .row.content a').addClass('ga-event'); $('.page.spage > .row.content th a').addClass('ga-event'); $('.row.content li a').removeClass('ga-event'); $('a.ga-event').attr('onclick', 'ga(\'send\',\'event\',\'linkTo\',this.href,\'http://localhost:4000/blog/howto-tweet-new-posts-in-octopress/\');'); }); </script> <script src="http://localhost:4000/assets/javascripts/global.js"></script></body></html>
