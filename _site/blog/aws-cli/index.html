<!DOCTYPE html><html lang="en" itemscope itemtype="http://schema.org/WebPage"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Using AWS CLI | omps.in</title><meta name=description content="Notes on using aws cli."><meta name=viewport content="width=device-width, initial-scale=1"><meta http-equiv="cache-control" content="public"/><meta http-equiv="pragma" content="public"><meta name="keywords" content="omps.in, blog, Theme, Jekyll" /><meta name="author" content="omps" /><meta property="og:locale" content="en" /><meta property="og:site_name" content="omps.in" /><meta property="og:type" content="Website" /><meta property="og:url" content="http://localhost:4000/blog/aws-cli/" /><meta property="og:description" content="Welcome to omps.in" /><meta property="og:title" content="Using AWS CLI - omps.in" /><link rel="canonical" href="http://localhost:4000/blog/aws-cli/"><link rel="alternate" type="application/rss+xml" title="omps.in" href="http://localhost:4000/feed.xml"> <script type="application/ld+json"> {"@context": "http://schema.org", "@type": "Website", "name": "omps", "headline": "omps.in", "author": {"@type": "Person", "name": {"omps.in"}}, "description": "Welcome to omps.in", "url": "http://localhost:4000"} </script> <script type="text/javascript"> var GLOBAL_BASEURL = "http://localhost:4000"; </script><link rel="icon" type="image/png" sizes="32x32" href="http://localhost:4000/assets/images/favicon/favicon-32x32.png"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"><link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,600i,700,700i,800,800i" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet"><link rel="stylesheet" href="http://localhost:4000/assets/stylesheets/main.css"> <script> var url_site = "http://localhost:4000", url_production = "http://localhost:4000"; if (url_site != url_production) { (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-90440415-1', 'auto'); ga('set', 'forceSSL', true); ga('send', 'pageview'); }; </script></head><body><div class="main" id="top"><div class="container wrapper"><div class="row"><div class="col-sm-3 sidebar"><div class="row header"><h2><a href="http://localhost:4000"><br>omps.in! </a></h2></div><div class="row menu"><ul><li class="nav-item"> <i class="fa fa-home" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/">Home</a></li><hr class="breakline"><li class="nav-item"> <i class="fa fa-edit" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/" >Blog</a></li><li class="nav-item"> <i class="fa fa-search" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/search/" >Search</a></li><li class="nav-item"> <i class="fa fa-tags" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/blog/tags/" >Tags</a></li><li class="nav-item"> <i class="fa fa-briefcase" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/projects/" onclick="ga('send', 'event', 'linkTo', 'http://localhost:4000/projects/', 'Projects');" >Projects</a></li><li class="nav-item"> <i class="fa fa-file-text-o" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/resume/" onclick="ga('send', 'event', 'linkTo', 'http://localhost:4000/resume/', 'Resume');" >Resume</a></li><li class="nav-item"> <i class="fa fa-rss" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/feed.xml" >Feed</a></li><li class="nav-item"> <i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;<a href="http://localhost:4000/contact/" >Contact</a></li></ul><div class="socials"><div class="row"><p></p><p>Follow Me!</p><div id="github" class="col-sm-3 columns"> <a href="https://github.com/omps/" target="_blank" title="GitHub" onclick="ga('send', 'event', 'linkTo', 'GitHub', 'Social Network', {useBeacon: true});" > <i class="fa fa-github icon" aria-hidden="true"></i> </a></div><div id="twitter" class="col-sm-3 columns"> <a href="https://twitter.com/ohgnis" target="_blank" title="Twitter" onclick="ga('send', 'event', 'linkTo', 'Twitter', 'Social Network', {useBeacon: true});" > <i class="fa fa-twitter icon" aria-hidden="true"></i> </a></div><div id="gplus" class="col-sm-3 columns"> <a href="https://plus.google.com/u/1/+OmPrakashomps" target="_blank" title="Google Plus" onclick="ga('send', 'event', 'linkTo', 'Google Plus', 'Social Network', {useBeacon: true});" > <i class="fa fa-google-plus icon" aria-hidden="true"></i> </a></div><div id="linkedin" class="col-sm-3 columns"> <a href="https://www.linkedin.com/in/ompsingh/" target="_blank" title="LinkedIn" onclick="ga('send', 'event', 'linkTo', 'LinkedIn', 'Social Network', {useBeacon: true});" > <i class="fa fa-linkedin icon" aria-hidden="true"></i> </a></div></div></div></div></div><div class="col-sm-9 content-main"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><div class="row title"><h1>Using AWS CLI</h1></div><div class="row meta" datetime="2016-04-01"> <time class="col-sm-6 datetime"> <i class="fa fa-calendar" aria-hidden="true"></i><span class="text tmargin "> 01 Abril, 2016 </span> </time><div class="col-sm-6 count-comments"> <span class="wrap"><i class="fa fa-comments" aria-hidden="true"></i>&nbsp;<a href="#comments" data-disqus-identifier="/blog/aws-cli/">0</a></span></div></div><div class="row tag-list"> <i class="fa fa-tags" aria-hidden="true"></i> <a href="http://localhost:4000/blog/tags//aws,">aws,</a> <a href="http://localhost:4000/blog/tags//cli,">cli,</a> <a href="http://localhost:4000/blog/tags//linux">linux</a></div><div class="row"> Read this in "about 3 minutes".</div><div class="row content"><h2 id="notes-on-using-aws-cli">Notes on using aws cli.</h2><h3 id="my-setup">MY setup.</h3><p>I am using arch linux running a 32 bit system, kernel version 4.4.5</p><p>I run an aws system on amazon cloud and beleive me i am always kind of get confused with the immense set of tools they have and most of the time with their data centres. I tend to mess up the data centre and have to browse through all the data centres to find where my ec2 instance is running. I finally decided to have a look at how the aws cli works.</p><h3 id="aws-cli-tool-installation">aws-cli tool installation.</h3><p>For aws cli installation on arch linux its pretty simple. You can use yaourt to simple download and install it. I would not go much into how to install yaourt and aws through it. I would write about that sometime later, but for now trush google and arch wiki.</p><p><code>yaourt aws-cli</code></p><p>it will ask a couple of questions, please keep checking and respond accordingly.</p><h3 id="configure-the-aws-cli">configure the aws-cli</h3><p>This is going to be a walk-through and I am doing it right now. Please bear if it look like random notes.</p><h3 id="sign-up-for-an-aws-account"><strong>Sign up for an AWS account.</strong></h3><p>Since I am already done with it. Here is the quick guide at amazon, which will help you in registering on for you.</p><ol><li><p>Open http://aws.amazon.com/, and then choose Create an AWS Account.</p><p>Follow the online instructions.</p></li><li><p>Part of the sign-up procedure involves receiving a phone call and entering a PIN using the phone keypad.</p></li></ol><p>AWS sends you a confirmation email after the sign-up process is complete. At any time, you can view your current account activity and manage your account by going to http://aws.amazon.com and clicking My Account/Console.</p><h4 id="to-get-your-access-key-id-and-secret-access-key"><strong>To get your access key ID and secret access key</strong></h4><p>Amazon recommends we create a IAM account key instead of the root aws key, this will let us manage our console securly. I will prefer the IAM account key and here are the steps.</p><ol><li><p>Open the <a href="https://console.aws.amazon.com/iam/home?#home" title="ACCESS IAM CONSOLE">IAM console</a>.</p></li><li><p>In the navigation pane, choose Users.</p></li><li><p>Choose your IAM user name (not the check box).</p></li><li><p>Choose the Security Credentials tab and then choose Create Access Key.</p></li><li><p>To see your access key, choose Show User Security Credentials. Your credentials will look something like this:</p></li></ol><blockquote><p>Access Key ID: AKIAIOSFODNN7EXAMPLE Secret Access Key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</p></blockquote><p>Choose <strong>Download Credentials</strong>, and store the keys in a secure location.</p><h4 id="configure-the-cli"><strong>Configure the CLI</strong></h4><ol><li><p>This is quite simple</p><p>$ aws configure AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY Default region name [None]: us-west-2 Default output format [None]: ENTER</p></li><li><p>Well now its not a lot simple. The problem is the user which is configured doesn’t have access to any policy and without any policy one cannot be able to run commands. I did the basic testing without any policy and well. this is what happened.</p><p>[~ (master)]$ aws ec2 create-security-group –group-name my-sg –description “My security group”</p><p>A client error (UnauthorizedOperation) occurred when calling the CreateSecurityGroup operation: You are not authorized to perform this operation.</p><p>[~ (master)]$ aws ec2 describe-instances –output table –region us-west-2</p><p>A client error (UnauthorizedOperation) occurred when calling the DescribeInstances operation: You are not authorized to perform this operation.</p></li></ol><p>So the smart thing to do is to go back and attach a policy to it.</p><p>This is my first time, so without taking time going through the nifty details of what each policy meant. I just attached the <strong>AdministratorAccess</strong> policy. { “Version”: “2012-10-17”, “Statement”: [ { “Effect”: “Allow”, “Action”: “<em>”, “Resource”: “</em>” } ] }</p><p>Now, the commands work like a charm.</p><pre><code>[~ (master)]$ aws ec2 create-security-group --group-name omps-sg --description "My security group"
{
    "GroupId": "sg-51146e36"
}

[~ (master)]$ aws ec2 describe-instances --output table --region us-west-2
------------------------------------------------------------------------------------
|                                 DescribeInstances                                |
+----------------------------------------------------------------------------------+
||                                  Reservations                                  ||
|+----------------------------------------+---------------------------------------+|
||  OwnerId                               |  855938437083                         ||
||  ReservationId                         |  r-2ce7c3e9                           ||
|+----------------------------------------+---------------------------------------+|
|||                                   Instances                                  |||
||+------------------------+-----------------------------------------------------+||
|||  AmiLaunchIndex        |  0                                                  |||
|||  Architecture          |  x86_64                                             |||
</code></pre><p>and very long output. Trimmed the output to keep the page short.</p><p>Thats it.</p><p>I would probably write more about IAM Policies later.</p><div class="row sharebutton"><ul class="wrapper"><li class="title">Share</li><li class="fb"> <a href="#" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),'facebook-share-dialog','width=626,height=436');return false;">Facebook</a></li><li class="linkedin"> <a href="http://www.linkedin.com/cws/share?url=http://localhost:4000/blog/aws-cli/" onclick="window.open(this.href,&quot;popupwindow&quot;,&quot;status=0,height=500,width=700,resizable=0,top=50,left=100&quot;);return false;" target="_blank" title="Share on LinkedIn">Linkedin</a></li><li class="googleplus"> <a href="https://plus.google.com/share?url=http://localhost:4000/blog/aws-cli/" onclick="window.open(this.href,&quot;popupwindow&quot;,&quot;status=0,height=500,width=700,resizable=0,top=50,left=100&quot;);return false;" target="_blank" title="Share on Google Plus">Google+</a></li></ul></div><div class="day-quote"><div class="title"></div><div class="content"></div></div><div class="row author"><div class="col-sm-2 image"> <img class="img-responsive center-block" src="http://localhost:4000/assets/images/author/typing.svg" alt=""></div><div class="col-sm-10 bio"><p class="title">Author</p><p class="name">omps</p><p class="content">Learning to blog, swim, cycle and run.</p></div></div><div class="disqus" id="comments"><div class="title"><h3><i class="fa fa-comments" aria-hidden="true"></i>&nbsp;Leave a comment on this post</h3></div><div class="content"><div id="disqus_thread"></div><script type="text/javascript"> var disqus_shortname = 'omps-in'; var disqus_identifier = '/blog/aws-cli/'; var disqus_title = 'Using AWS CLI'; var disqus_url = 'http://localhost:4000/blog/aws-cli/'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script></div></div></div></article></div></div></div><div class="footer"><div class="container-fluid"><div class="row-fluid"><div class="col-sm-4 copyright"> <span>omps.in © 2017-2018 • All right reserved.</span></div><div class="col-sm-4 message"> <span>theme based on Jekyll.</span></div><div class="col-sm-4 madeby"> <span>Made with&nbsp;<a href="https://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;using&nbsp;<a href="https://github.com/williamcanin/typing-jekyll-template" target="_blank">Typing</a>&nbsp;Theme.</span></div><a class="pull-right top" href="#top"><i class="fa fa-caret-up" aria-hidden="true"></i></a></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> <script src="http://localhost:4000/assets/javascripts/jekyll-spotify-plugin.min.js"></script> <script type="text/javascript"> jQuery(document).ready(function($) { $('.post > .row.content a').addClass('ga-event'); $('.page.spage > .row.content th a').addClass('ga-event'); $('.row.content li a').removeClass('ga-event'); $('a.ga-event').attr('onclick', 'ga(\'send\',\'event\',\'linkTo\',this.href,\'http://localhost:4000/blog/aws-cli/\');'); }); </script> <script src="http://localhost:4000/assets/javascripts/global.js"></script></body></html>
